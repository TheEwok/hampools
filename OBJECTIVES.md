# Conception

## Output format

I conceieve of the project as generating the following artifacts:

1. For each element, a json file containing all questions, nested within the
   groups, nested within the subelements hierarchically, with group and
   subelement descriptions and other such data inhering on the hierarchy as 
   appropriate.
2. For each element, a json file containing the data represented by the 
   syllabus (as applies -- it looks like there's no syllabus data for the
   technician pool)
3. Two json schemas describing the format for each of the question and syllabus
   files.
   These serve both to validate the output format and to describe the data 
   structure in a format that may be rendered to md, yaml, or other such
   human- or machine-readable format needed by the consumer.
   If any of these formats are desired enough, they may be generated and 
   distributed as build artifacts along with the others described.

This project (or one that it's broken off to) should only serve to generate 
these artifacts, which will not be committed to the project repository.
If necessary, these artifacts should exist in a separate repository.
Consumers of the data should intake these json files for provision of a REST
API, differently-structured representation, etc.
Such provisions lie also outside the scope of the project repository herein 
proposed.

## Procedure

1. .doc files are downloaded directly from ncvec.org, possibly renamed
2. .txt files are output directly from these .doc files
3. .patch files are manually created by which we can generate question and
   syllabus .txt files suitable for intake to the parsers.
   This includes discarding portions of the file that don't contain syllabus
   or question information, as well as fixing syntactic mistakes within these
   sections.
4. A syllabus parser is run for each element, which generates a json syllabus
   in a format to be determined, as well as json schemas containing the 
   subelement, group, and question counts.
5. A question parser is run for each element, which generates a json file
   similar to the current output of my parser.
6. For each element, two tests are run. 
   The first verifies that the subelement, group, and question counts from the
   syllabus.
   The second checks the general format against the general data schema.

# File structure

Throughout this section:
- `$element` is one of  `'extra'`, `'general'`, or `'technician'`.
- _(static)_ indicates files or directories containing only files that are to 
  be commited to the repository.
  _(volatile)_ indicates files or directories that are generated by the 
  project and which should not be committed to the repository.
  
## `/`

Contains project README, LICENSE, all that good stuff, as well as a Makefile,
package.json, gruntfile, or wtfever we need to enact steps 4-6 described above.
Also contains executables adjacent to this purpose, broadly: a question parser,
a syllabus parser, and a tester.
These may be the same application or different ones, whichever makes sense.

## `/resource` (static)

Contains `README.md` and three subdirectories `$element`.

### `/resource/README.md`

Rubrick of contents of resource directory.
For downloaded content, includes source url and date.
For other files, includes process description.

### `/resource/$element/(pool).doc`

Question pool .doc file as downloaded.
Might be committed with `-r` perms.
Filename format is currently undefined, but we might standardize, this is TODO.

### `/resource/$element/(pool).txt`

Raw rendering of .doc file to .txt.
I'm doing this with Word's Save As to .txt, but this should be better defined 
and preferably unreliant on Word.

### `/resource/$element/questions.patch`

Manually-composed patch file which takes `(pool).txt` to a format that can be
intaked by the question parser.

### `/resource/$element/syllabus.patch`

Manually-composed patch file which takes `(pool).txt` to a format that can be
intaked by the syllabus parser.

### `/resource/$element/(something).(something)`

Image file as downloaded.
This is presently for archival purposes.
File formats vary across the elements, specification of workflow and further 
integration is presently TODO.

## `/build` (volatile)

Contains intermediate build artifacts.
Currently these are the question and syllabus sections of the question pools
as determined by the patch files, as well as element-specific json schemas
generated by the syllabus parser.
More content is TBD.

### `/build/$element/questions.txt`

Question text, generated from the element's raw .txt representation via a 
patch, and intaked by the question parser.

### `/build/$element/syllabus.txt`

Syllabus text, generated from the element's raw .txt representation via a 
patch, and intaked by the question parser.

### `/build/$element/schema.json`

Json schema generated by the syllabus parser which checks that group and
questions counts in the question json output match those described in the 
syllabus.

## `/dist` (volatile)

Distribution directory.

## `/lib` (static)

Contains files, not herein described, which can be `require`d by the
applications.

### `/lib/schema/questions.json`

Json schema definition for the output question format.

### `/lib/schema/syllabi.json`

Json schema definition for the output syllabus format.

